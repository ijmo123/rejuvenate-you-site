---
import BaseLayout from './BaseLayout.astro';
import BookingCTA from '../components/BookingCTA.astro';

interface Props {
  title: string;
  description: string;
  location?: 'scottsdale' | 'phoenix' | 'both';
  faqs?: Array<{ question: string; answer: string }>;
  price?: string;
  duration?: string;
  currentLocation?: 'scottsdale' | 'phoenix' | null;
}

const {
  title,
  description,
  location = 'both',
  faqs = [],
  price,
  duration,
  currentLocation = null
} = Astro.props;

const schema = {
  '@context': 'https://schema.org',
  '@type': 'Service',
  name: title,
  description: description,
  provider: {
    '@type': 'LocalBusiness',
    name: 'Rejuvenate You',
    address: {
      '@type': 'PostalAddress',
      streetAddress: '7127 E Sahuaro Dr, Ste 103',
      addressLocality: 'Scottsdale',
      addressRegion: 'AZ',
      postalCode: '85254',
      addressCountry: 'US'
    }
  }
};

if (price) {
  schema.priceRange = price;
}
---

<BaseLayout
  title={title}
  description={description}
  schema={schema}
  currentLocation={currentLocation}
>
  <div class="max-w-4xl mx-auto px-4 py-12">
    <article>
      <header class="mb-8">
        <h1 class="text-4xl font-bold mb-4" style="color: #53009D;">
          {title}
        </h1>
        <p class="text-lg text-gray-600 mb-6">
          {description}
        </p>

        {(price || duration) && (
          <div class="bg-purple-50 p-6 rounded-lg mb-8 border border-purple-200">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              {price && (
                <div>
                  <p class="text-sm text-gray-600 font-semibold">Price</p>
                  <p class="text-2xl font-bold" style="color: #53009D;">{price}</p>
                </div>
              )}
              {duration && (
                <div>
                  <p class="text-sm text-gray-600 font-semibold">Duration</p>
                  <p class="text-2xl font-bold" style="color: #53009D;">{duration}</p>
                </div>
              )}
            </div>
          </div>
        )}
      </header>

      <div class="prose prose-lg max-w-none mb-12">
        <slot />
      </div>

      <div class="mb-12">
        <BookingCTA location={location} />
      </div>

      {faqs.length > 0 && (
        <section class="mt-12">
          <h2 class="text-3xl font-bold mb-8" style="color: #53009D;">
            Frequently Asked Questions
          </h2>
          <div class="space-y-4">
            {faqs.map((faq) => (
              <details class="group border border-gray-200 rounded-lg p-6 cursor-pointer hover:border-purple-300">
                <summary class="flex items-center justify-between font-semibold text-gray-900 group-open:text-purple-700">
                  <span>{faq.question}</span>
                  <span class="text-xl group-open:rotate-180 transition-transform">â–¼</span>
                </summary>
                <div class="mt-4 text-gray-700">
                  {faq.answer}
                </div>
              </details>
            ))}
          </div>
        </section>
      )}
    </article>
  </div>
</BaseLayout>
